<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Channels 0.8</title>
<style><!-- 
body {
	margin-left: 10%;
	margin-right: 10%;
	padding: 20pt;
	padding-top: 10pt;
	background: rgb(255,255,255);
	font:  10.5pt/15pt "Helvetica",Helvetica,sans-serif;
	color: rgb(80,80,80);
}

h1, h2, h3, h4 {
	font-family: "Trebuchet MS",Helvetica,sans-serif;
	color: rgb(22, 130, 178);
	font-weight: normal;
	padding-top: 0.5em;
	cursor: pointer;
}

hr {
	color: rgb(150, 220, 238);
	background: rgb(150, 220, 238);
	height: 1px;
	border: 0;
}


b {
	color: rgb(22,130,178);
}

strong {
	color: rgb(103,183,0);
}


a:link, a:active, a:visited {
	color: rgb(22,130,178);
	text-decoration: none;
}

a:hover {
	text-decoration: none;
	background-color: #dbecf4;
}

aimg {
	border: 0;
}

#header, #footer {
	font-size: 7pt;
	clear: both;
	width: 100%;
	color: rgb(177,208,223);
}

.kiwiContent {
	text-align: left;
}


#footer {
	padding-top:  30pt;
	text-align: right;
}

/*  Kiwi-specific  */

.title {
	margin-bottom: 0;
}

.kiwiMeta {
	max-width: 700px;
	padding: 5pt;
	margin-bottom:  2em;
	border-top:  1px solid rgb(150, 220, 238);
	background-color: rgb(250,250,250);
}

.kiwiMeta tr td {
	color: rgb(22, 130, 178);
}

.kiwiMeta tr td.name {
	font-weight: bold;
}

.kiwiContent {
	max-width: 700px;
}

.kiwiContent .heading .number {
	padding-right: 8pt;
}

.kiwiContent .heading .number .lastDot {
	display: none;
}


.kiwiContent .heading .number .level0 .lastDot {
	display: inline;
}

.kiwiContent h1 {
	font-size: 1.8em;
	font-weight: bold;
	margin-top: 1.5em;
	padding-bottom: 0.5em;
	border-bottom:  1px dotted rgb(150, 220, 238);
}

.kiwiContent h2 {
	font-size: 1.4em;
	font-weight: bold;
	padding-bottom: 0.5em;
	border-bottom:  1px dotted rgb(150, 220, 238);
}

.kiwiContent h3 {
	font-size: 1.2em;
	font-weight: normal;
}

.kiwiContent pre {
	padding: 5pt;
	border:  1px solid rgb(150, 220, 238);
	padding-left: 20pt;
	background-color: rgb(240,240,250);
	font-size: 8pt;
	color: rgb(22,130,178);
}

.kiwiContent code {
	font-size: 8pt;
	background-color: rgb(240,240,250);
}

.kiwiContent dt {
	color: rgb(22,130,178);
	font-weight: bold;
}

.kiwiContent dd {
	border-left:  1px solid rgb(150, 220, 238);
	padding-left: 20pt;
	margin-bottom: 2em;
}

.kiwiContent dd pre {
}

.kiwiContent ul {
	padding-top: 0em;
	margin-top: 0em;
}

.kiwiContent ul li {
	padding-bottom: 0.2em;
}

.kiwiContent ul li.todo {
	list-style-type: square;
}

.kiwiContent ul li.todo.done {
	text-decoration: line-through;
}

.kiwiContent table {
	border:  1px solid rgb(150, 220, 238);
	padding: 0pt;
}

.kiwiContent table caption {
	font-family: serif;
	padding-top: 1em;
	padding-bottom: 0.5em;
	font-style: italic;
	font-size: 90%;
	color: rgb(22, 130, 178);
}

.kiwiContent table tbody {
}

.kiwiContent table tr {
	margin: 0;
}

.kiwiContent table tr td {
	margin: 0;
	padding: 5pt;
	font-size: 90%;
	min-width: 125px;
	background-color: rgb(250,250,250);
	border-bottom: 1px solid rgb(150, 220, 238);
}

.kiwiContent table tr td.lastRow {
	border-bottom: none;
}

.kiwiContent table tr td.lastCol {
	border-right: none;
}

.kiwiContent table tr.even td {
	background-color: #FEFEFE;

}

.kiwiContent table tr.odd td {
	background-color: rgb(240,240,240);
}

.kiwiContent .term {
	color: rgb(22, 130, 178);
	background: rgb(240, 250, 256);
}

.kiwiContent .quote {
	font-style: italic;
	color: rgb(120, 120, 120);
}

.kiwiContent .citation {
	font-style: italic;
	color: rgb(120, 120, 120);
}

.kiwiContent div[class^="ann"] {
	margin-top: 5pt;
	margin-bottom: 5pt;
	padding: 5pt;
	padding-left: 20pt;
	color: rgb(100, 100, 100);
}

.kiwiContent div[class^="ann"] .title {
	font-weight: bold;
}

.kiwiContent .annNote {
	border:  1px solid rgb(103,183,0);
	margin-top: 5pt;
	margin-bottom: 5pt;
	padding: 5pt;
	padding-left: 20pt;
	background: #fffbe4;
	color: rgb(100, 100, 100);
	border:  1px solid #dedac3;
}

.kiwiContent .annNote .title {
	font-weight: bold;
	display: none;
}

.kiwiReferences {
	font:  8pt/12pt "Lucida Grande",Lucida,sans-serif;
	margin-top: 10pt;
	padding: 5pt;
	border-top:  1px solid rgb(200, 200, 200);
	background-color: rgb(250,250,250);
	color: rgb(200, 200, 200);
	font-size: 8pt;
}
.kiwiReferences a:link, .kiwiReferences a:active, .kiwiReferences a:visited {
	color: rgb(150,150,150);
}

.kiwiReferences .entry {
	padding-top: 5pt;
	clear: both;
}

.kiwiReferences .entry .name {
	float: left;
	font-weight: bold;
	padding-right: 5pt;
}

.kiwiReferences .entry .content {
	text-align: right;
}

 --></style>
</head>
<body>
<div
	class="title"><h1>Channels 0.8</h1><h2>Developer Manual</h2></div><table class='kiwiMeta'><tr><td width='0px' class='name'>Author</td><td width='100%' class='value'>Sebastien Pierre &lt;sebastien@ivy.fr&gt;</td></tr><tr><td width='0px' class='name'>Revision</td><td width='100%' class='value'>12-Nov-2007</td></tr></table>
<div class="kiwiContent"><div class='content'><p>Extend 2.0 is an evolution of <a href="http://www.ivy.fr/extend/extend-1.0.0.js" class="external">Extend 1.0</a> which implements a flexible class-based OOP layer on top of the JavaScript prototype object model.</p><p>Extend 2.0 allows you to write nice and clean classes in JavaScript, features introspection and class meta-information, is mature and <a href="http://www.ivy.fr/js/extend/test.html" class="external">fully-tested</a>, and used as a base for our wonderful <a href="http://www.ivy.fr/sugar" class="external">Sugar language</a> runtime.</p><div class="section" level="1"><h1 class="heading"><span class="number"><span class="level0">1<span class="lastDot dot">.</span></span></span>The problem</h1><div class="level1"></div></div><div class="section" level="1"><h1 class="heading"><span class="number"><span class="level0">2<span class="lastDot dot">.</span></span></span>Channels API</h1><div class="level1"><p>Extend offers a set of methods that can are available to Extend classes and instances created from Extend classes. These methods range from simple introspection (what is the class of an object, what is this class name, is this an object an instance of this class, etc) to more complex things (safely wrapping a method for callback, listing inherited methods, etc).</p><div class="section" level="2"><h2 class="heading"><span class="number"><span class="level0">2<span class="dot">.</span></span><span class="level1">1<span class="lastDot dot">.</span></span></span>Futures API</h2><div class="level2"><dl><dt> <code>Extend.Class({...})</code></dt><dd><div class='content'>Declares and returns a new class according to the class description given as argument. This description was explained in the previous section.</div></dd><dt> <code>Extend.getClass(name:String)</code></dt><dd><div class='content'>Returns the class with the given absolute name, if any.</div></dd><dt> <code>Extend.getClasses()</code></dt><dd><div class='content'>Returns a dictionary that maps <span class='term'>declared class names</span> to actual class instances. Extend acts like a global namespace where non-anonymous declared classes are registered.</div></dd><dt> <code>Extend.getChildrenOf(aClass)</code></dt><dd><div class='content'>Returns a dictionary that maps <span class='term'>declared class names</span> to actual class instances of classes that inherit from the given class (<code>aClass</code>). This excludes the given class from the result.</div></dd></dl></div></div><div class="section" level="2"><h2 class="heading"><span class="number"><span class="level0">2<span class="dot">.</span></span><span class="level1">2<span class="lastDot dot">.</span></span></span>Channels API</h2><div class="level2"><p>The <span class='term'>object API</span> defines the methods which are available to instances (objects) which were created (instantiated) from a class defined using Extend.</p><dl><dt> <code>isClass()</code></dt><dd><div class='content'>Tells if the given object is class or not. This returns <code>false</code></div></dd><dt> <code>getClass()</code></dt><dd><div class='content'>Returns the class object associated with this instance. You can use the class object to access class operations, class attributes, etc.</div></dd><dt> <code>getMethod(name:String)</code></dt><dd><div class='content'>In JavaScript, if you give a method as a callback by simply doing <code>object.method</code>, then you may have problems when the caller changes the <code>this</code> argument of the method. Using <code>getMethod</code> will ensure that the this is preserved. It's actually the equivalent of doing 'this.getClass().bindMethod(this, name)'.</div></dd><dt> <code>getCallback(name:String)</code></dt><dd><div class='content'>The <code>getCallback</code> method is similar to <code>getMethod</code>, except that it will add an extra argument which is the <code>this</code> used when invoking the method. Libraries such as <a href="<http://www.jquery.com>" class="external">jQuery</a> change the <code>this</code> of callbacks given to events such as <code>click</code> or <code>focus</code> to the DOM node that received the event rather than the instance to which the method is bound. Using <code>getMethod</code> insulates you from this change, but you also lose the reference to the DOM node that received the event (the event target). When using <code>getCallback</code>, you'll have the target as an additional argument.</div></dd><dt> <code>getSuper(c:Class)</code></dt><dd><div class='content'>Returns a proxy that will use the current object as state, but where every operation defined in the proxy will use the implementation defined in the given class.</div></dd><dt> <code>isInstance(c:Class)</code></dt><dd><div class='content'>Returns <code>true</code> if this instance is an instance of the given class, which must be either the class of this instance, or an ancestor of this instance class.</div></dd></dl></div></div></div></div><div class="section" level="1"><h1 class="heading"><span class="number"><span class="level0">3<span class="lastDot dot">.</span></span></span>Examples</h1><div class="level1"><p>Step 1: Create a new class</p><pre>var Shape = Extend.Class(
  name:"Shape",
  initialize:function(){
    this.points = [];
  }
  methods:{
    addPoint:function(p){
      this.points.push(p);
    }
    getPoints:function(){
      return this.points;
    }
  }
});</pre><p>Step 2: Create an instance of your class, and do stuff</p><pre>my_shape = new Shape();
my_shape.addPoint([0,0]);
my_shape.addPoint([1,0]);
console.log(my_shape.getPoints().toSource());</pre><p>Step 3: Create a subclass</p><pre>var Rectangle = Extend.Class(
  name:"Rectangle",
  parent:"Shape",
  initialize:function(){
    this.points = [];
  }
  methods:{
    addPoint:function(p){
      this.points.push(p);
    }
    getPoints:function(){
      return this.points;
    }
  }
});</pre><p>Using callbacks with jQuery</p><pre>var MyWidget = Extend.Class({
  name:"MyWidget",
  methods:{
    onClick:function(target){
      $(target).css({background:yello});
    }
})

var w = new MyWidget()
$("#my-widget").click( w.getCallback("onClick") )</pre></div></div></div></div>
<div class="kiwiReferences"><div class="entry"><div class="name"><a name="0">0</a></div><div class="content"> JavaScript Gotchas, Sébastien Pierre, June 2007
      <a href="http://www.ivy.fr/notes/javascript-gotchas.html" class="external">tech note</a></div></div><div class="entry"><div class="name"><a name="1">1</a></div><div class="content"> Object-Oriented Programmming in JavaScript, Mike Moss, January 2006
      <a href="http://mckoss.com/jscript/object.htm" class="external">article</a></div></div><div class="entry"><div class="name"><a name="2">2</a></div><div class="content"> Prototype-based Programming Wikipedia Article,
      <a href="http://en.wikipedia.org/wiki/Prototype-based_programming" class="external">wikipedia</a></div></div><div class="entry"><div class="name"><a name="3">3</a></div><div class="content"> Java Reflection API
      <a href="http://java.sun.com/docs/books/tutorial/reflect/index.html" class="external">tutorial</a></div></div><div class="entry"><div class="name"><a name="4">4</a></div><div class="content"> Extend Class, Prototype library extension to add subclassing
      <a href="http://wiki.script.aculo.us/scriptaculous/show/ExtendClass" class="external">wiki page</a></div></div><div class="entry"><div class="name"><a name="5">5</a></div><div class="content"> Extend Class Further, adding Ruby-like OO features to Prototype
      <a href="http://wiki.script.aculo.us/scriptaculous/show/ExtendClassFurther" class="external">wiki page</a></div></div></div>
</body>
</html>